<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Responsive Components: Present &amp; Future</title>
    <meta name="description" content="Building responsive components with current and future code techniques">

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/custom.css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        
          <section>
  <h1 class="big"><em>Responsive Components</em><br>Present &amp; Future</h1>

</section>

        
          <section>
  <h2>Media Queries:<br> Why We Want More</h2>

</section>

        
          <section>
  <h3>Media Queries change CSS based on browser</h3>
<ul>
<li>Screen dimensions (height, width)</li>
<li>Screen resolution / pixel density</li>
<li>Device orientation / rotation</li>
<li>User preferences (contrast, motion, color-scheme)</li>
</ul>

</section>

        
          <section>
  <p>But, what about the size of the <em>element&nbsp;itself?</em></p>

</section>

        
          <section>
  <p>First, figure out what size the element will be in a given responsive layout.</p>
<p>Then use multiple MQs to toggle CSS changes on &amp; off.</p>

</section>

        
          <section>
  <pre><code class="hljs language-css"><span class="hljs-selector-class">.widget</span> {
  <span class="hljs-comment">/* narrow 1col layout: narrow version CSS */</span>
}
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">480px</span>) <span class="hljs-keyword">and</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">959px</span>) {
  <span class="hljs-selector-class">.widget</span> {
    <span class="hljs-comment">/* wide 1col layout: wide version CSS */</span>
  }
}
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">960px</span>) <span class="hljs-keyword">and</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">1199px</span>) {
  <span class="hljs-selector-class">.widget</span> {
    <span class="hljs-comment">/* narrow 2col layout: narrow version CSS */</span>
  }
}
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">1200px</span>) {
  <span class="hljs-selector-class">.widget</span> {
    <span class="hljs-comment">/* wide 2col layout: wide version CSS */</span>
  }
}
</code></pre>
<div class="fragment noper">
  <svg role="presentation" aria-label="Nope" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" focusable="false">
    <circle stroke="red" stroke-width="2" fill="none" cy="8" cx="8" r="7"></circle>
    <path stroke="red" stroke-width="2" fill="none" d="M13 3L3 13"></path>
  </svg>
</div>

</section>

        
          <section>
  <pre><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-content"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"widget"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-sidebar"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"widget"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
</code></pre>

</section>

        
          <section>
  <h2>Current Techniques</h2>

</section>

        
          <section>
  <h3>CSS</h3>

</section>

        
          <section>
  <h4>Flexbox Wrapping</h4>
<ul>
<li>Uses <code>flex-wrap</code> &amp; <code>flex-basis</code> adjust layout depending on container size</li>
<li>Source: <a href="https://css-tricks.com/how-to-make-a-media-query-less-card-component/#a-recipe-for-zero-media-queries">Geoffrey Crofte</a></li>
</ul>

</section>

        
          <section data-background-iframe="https://codepen.io/jdsteinbach/embed/ExoEPjN" data-background-interactive="false" data-preload="true">
  
</section>

        
          <section>
  <h4>Holy Albatross</h4>
<ul>
<li>Uses <code>flex-basis</code> &amp; <code>calc()</code> to toggle between column &amp; row layouts depending on container size</li>
<li>Source: Heydon Pickering (<a href="https://heydonworks.com/article/the-flexbox-holy-albatross/">original</a>, <a href="https://heydonworks.com/article/the-flexbox-holy-albatross-reincarnated/">update</a>)</li>
</ul>

</section>

        
          <section>
  <pre><code class="hljs language-css"><span class="hljs-selector-class">.albatross</span> {
  <span class="hljs-attr">--container-width</span>: <span class="hljs-number">720px</span>;

  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-wrap</span>: wrap;
}

<span class="hljs-selector-class">.albatross__child</span> {
  <span class="hljs-attribute">flex-grow</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">flex-basis</span>: <span class="hljs-built_in">calc</span>((<span class="hljs-built_in">var</span>(--container-width) - <span class="hljs-number">100%</span>) * <span class="hljs-number">999</span>);
}
</code></pre>

</section>

        
          <section data-background-iframe="https://codepen.io/jdsteinbach/embed/zYpWrwZ" data-background-interactive="false" data-preload="true">
  
</section>

        
          <section>
  <h4>CSS Grid</h4>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.grid</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-columns</span>:
    <span class="hljs-built_in">repeat</span>(auto-fit, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">200px</span>, <span class="hljs-number">1</span>fr));
}
</code></pre>
<ul>
<li>Adapts column count for child width</li>
<li>Sources: <a href="https://css-tricks.com/look-ma-no-media-queries-responsive-layouts-using-css-grid/">Juan Martín García</a>, <a href="https://archive.hankchizljaw.com/wrote/create-a-responsive-grid-layout-with-no-media-queries-using-css-grid/">Andy Bell</a></li>
</ul>

</section>

        
          <section data-background-iframe="https://codepen.io/jdsteinbach/embed/dyJmGRm" data-background-interactive="false" data-preload="true">
  
</section>

        
          <section>
  <h4>Clamping for <code>font-size</code>, etc</h4>
<ul>
<li>Use CSS <code>clamp()</code> function (optionally with <code>min()</code> &amp; <code>max()</code>) to create responsive <code>font-size</code>, <code>line-height</code>, etc.</li>
<li>Relies on viewport size, not component</li>
<li>Source: <a href="https://css-tricks.com/linearly-scale-font-size-with-css-clamp-based-on-the-viewport/">Pedro Rodgriguez</a>, <a href="https://css-tricks.com/beyond-media-queries-using-newer-html-css-features-for-responsive-designs/#setting-minimum-and-maximum-values-in-css">David Atanda</a></li>
</ul>

</section>

        
          <section>
  <h3>JS</h3>

</section>

        
          <section>
  <h4><code>ResizeObserver</code></h4>
<ul>
<li>A JS API to watch an element’s size &amp; run JS functions (modify DOM) as needed</li>
<li>Source: <a href="https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver">MDN</a></li>
<li><a href="https://github.com/juggle/resize-observer">Polyfill</a></li>
</ul>

</section>

        
          <section>
  <pre><code class="hljs language-js"><span class="hljs-keyword">const</span> ro = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function"><span class="hljs-params">entries</span> =&gt;</span> {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> e <span class="hljs-keyword">of</span> entries) {
    <span class="hljs-keyword">const</span> size = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(e.<span class="hljs-property">borderBoxSize</span>)
      ? e.<span class="hljs-property">borderBoxSize</span>[<span class="hljs-number">0</span>]
      : e.<span class="hljs-property">borderBoxSize</span>;
    <span class="hljs-keyword">const</span> action = (size.<span class="hljs-property">inlineSize</span> &gt;= <span class="hljs-number">480</span>)
      ? <span class="hljs-string">'add'</span>
      : <span class="hljs-string">'remove'</span>;
    e.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>[action](<span class="hljs-string">'wide'</span>);
  }
});
ro.<span class="hljs-title function_">observe</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'box'</span>));
</code></pre>

</section>

        
          <section data-background-iframe="https://codepen.io/jdsteinbach/embed/gOoePxZ" data-background-interactive="false" data-preload="true">
  
</section>

        
          <section data-background-iframe="https://caniuse.com/resizeobserver" data-background-interactive="false" data-preload="true">
  <p class="sr-only">Resize Observer is supported in all modern browsers (but not IE &amp; pre-Chromium Edge), covering 92.2% of global usage.</p>

</section>

        
          <section>
  <h4>Avoid Memory Leaks</h4>
<pre><code class="hljs language-js">ro.<span class="hljs-title function_">observe</span>(el)

ro.<span class="hljs-title function_">unobserve</span>(el)

ro.<span class="hljs-title function_">disconnect</span>()
</code></pre>

</section>

        
          <section>
  <h2>Future: <br>Container Queries</h2>

</section>

        
          <section>
  <h3>What about Element Queries?</h3>
<ul>
<li>2011: <a href="https://github.com/ahume/selector-queries">Selector Queries</a>, Andy Hume</li>
<li>2013: “<a href="https://www.smashingmagazine.com/2013/06/media-queries-are-not-the-answer-element-query-polyfill/">Media Queries Are Not The Answer: Element Queries</a>,” Tyson Matanich</li>
<li>2015: “<a href="https://www.youtube.com/watch?v=aYPX76NWM1o">Container-based RWD with Element Queries</a>,” Philip Zastrow [Video]</li>
</ul>

</section>

        
          <section>
  <h3>Solution:<br> <strong>Container Queries</strong></h3>
<div class="credit"><strong>Credit: <a href="https://www.oddbird.net/talks/responsive-components/">Miriam Suzanne</a></strong><br><strong><a href="https://twitter.com/TerribleMia">@TerribleMia</a></strong></div>

</section>

        
          <section>
  <h3>But Loops…</h3>
<pre><code class="hljs language-scss"><span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;
}

<span class="hljs-selector-class">.element</span>:query(min-width: <span class="hljs-number">300px</span>) {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
}
</code></pre>

</section>

        
          <section>
  <h4>1. Create a Container</h4>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.page-content</span> {
  container-type: inline-size;
}
</code></pre>
<p>Disables content-based sizing</p>
<p>* Spec still in WIP</p>

</section>

        
          <section>
  <h4>2. Style Children</h4>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.widget</span> {
  <span class="hljs-comment">/* narrow container: narrow version CSS */</span>
}
<span class="hljs-keyword">@container</span> size(<span class="hljs-attribute">min-width</span>: <span class="hljs-number">480px</span>) {
  <span class="hljs-selector-class">.widget</span> {
    <span class="hljs-comment">/* wide container: wide version CSS */</span>
  }
}
</code></pre>
<p>Each <code>.widget</code> queries its potential containers.</p>

</section>

        
          <section>
  <h4>3. Name Containers (Optional)</h4>

</section>

        
          <section>
  <pre><code class="hljs language-css"><span class="hljs-selector-class">.page-content</span> {
  container-name: main;
}
<span class="hljs-selector-class">.page-content__gallery</span> {
  container-name: gallery;
}
<span class="hljs-keyword">@container</span> main size(<span class="hljs-attribute">min-width</span>: <span class="hljs-number">480px</span>) {
  <span class="hljs-selector-class">.widget</span> { <span class="hljs-comment">/* wide `main` container */</span> }
}
<span class="hljs-keyword">@container</span> gallery size(<span class="hljs-attribute">min-width</span>: <span class="hljs-number">480px</span>) {
  <span class="hljs-selector-class">.widget</span> { <span class="hljs-comment">/* wide `gallery` container */</span> }
}
</code></pre>

</section>

        
          <section data-background-iframe="https://codepen.io/jdsteinbach/embed/jOYzWZP" data-background-interactive="false" data-preload="true">
  
</section>

        
          <section data-background-iframe="https://caniuse.com/css-container-queries" data-background-interactive="false" data-preload="true">
  <p class="sr-only">Browser support for Container Queries is currently Chrome, behind a flag. <a href="https://caniuse.com/css-container-queries">See current data on Can I use</a></p>

</section>

        
          <section>
  <h3>Polyfill</h3>
<p><a href="https://github.com/jsxtools/cqfill">Jonathan Neal’s <code>cqfill</code></a></p>
<p><a href="https://github.com/GoogleChromeLabs/container-query-polyfill">Google Chrome Labs</a></p>

</section>

        
          <section>
  <h4>Ember Modifier Workaround</h4>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">modifier</span>(<span class="hljs-function">(<span class="hljs-params">element, queries</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> ro = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function"><span class="hljs-params">entries</span> =&gt;</span> {
    <span class="hljs-comment">// use `queries` to manage classes/sizes</span>
  });
  ro.<span class="hljs-title function_">observe</span>(element);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> ro.<span class="hljs-title function_">disconnect</span>();
});
</code></pre>
<br>
<pre><code class="hljs language-html">
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> {{<span class="hljs-attr">cq</span> <span class="hljs-attr">this.queries</span>}}&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

</code></pre>

</section>

        
          <section>
  <h3>More Info</h3>
<ul>
<li><a href="https://github.com/dbaron/container-queries-implementability">David Baron’s Initial Proposal</a></li>
<li><a href="https://github.com/oddbird/css-sandbox/blob/main/src/rwd/query/explainer.md">Miriam Suzanne’s Detailed Explainer</a></li>
<li><a href="https://css.oddbird.net/rwd/query/syntax/">Current Syntax</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Container_Queries">MDN</a></li>
<li><a href="https://github.com/w3c/csswg-drafts/projects/18">CSS Working Group’s Draft Spec</a></li>
</ul>

</section>

        
          <section>
  <h3>What Can I Do?</h3>
<ul>
<li>Use a polyfill</li>
<li>Follow the csswg spec &amp; join the discussion</li>
<li>Upvote browser implementation trackers as available</li>
</ul>

</section>

        
          <section>
  <h2>Thanks, Y’all! <div aria-hidden="true">👍</div></h2>

</section>

        
          <section>
  <h2>James Steinbach</h2>
<h3 class="mb-2">Staff Engineer<br> at <a rel="noreferrer noopener nofollow" target="_blank" href="https://grnh.se/14f58c011us">
  <span class="sr-only">auth0</span>
  <svg viewBox="0 0 82 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="auth0-logo"><path d="M18.596 0H10.8l2.408 7.511h7.797l-6.307 4.473 2.409 7.55c4.058-2.957 5.39-7.438 3.898-12.031L18.596 0zM.593 7.511H8.39L10.799 0H3L.593 7.511C-.9 12.104.433 16.585 4.492 19.543l2.407-7.551L.593 7.511zm3.899 12.024L10.799 24l6.306-4.465L10.8 14.99l-6.307 4.545zM63.343 7.32c-1.842 0-3.022.837-3.572 2.2h-.143V3.34H56.86v16.163h2.83v-7.017c0-1.738 1.077-2.735 2.6-2.735 1.483 0 2.36.95 2.36 2.568v7.184h2.83v-7.655c-.007-2.91-1.65-4.528-4.138-4.528zm11.785-4.011c-3.827 0-6.14 2.998-6.147 8.205 0 5.222 2.296 8.26 6.147 8.26 3.843.008 6.148-3.03 6.148-8.26-.008-5.199-2.32-8.205-6.148-8.205zm-3.221 8.205c.008-3.804 1.244-5.805 3.221-5.805 1.356 0 2.36.925 2.862 2.719l-6.035 4.385a16.46 16.46 0 0 1-.048-1.3zm3.221 5.828c-1.395 0-2.424-.988-2.91-2.902l6.067-4.41c.048.463.072.957.072 1.492 0 3.827-1.236 5.82-3.229 5.82zm-31.009-2.886c0 1.826-1.307 2.735-2.56 2.735-1.362 0-2.264-.965-2.264-2.488V7.495h-2.83v7.647c0 2.886 1.642 4.52 4.003 4.52 1.802 0 3.061-.948 3.611-2.288h.128v2.137h2.743V7.495h-2.83v6.96zM30.062 7.312c-2.527 0-4.465 1.124-5.087 3.317l2.64.374c.279-.82 1.076-1.523 2.463-1.523 1.316 0 2.033.67 2.033 1.85v.048c0 .813-.853.853-2.974 1.076-2.328.248-4.56.95-4.56 3.652 0 2.36 1.73 3.612 4.018 3.612 1.882 0 3.006-.885 3.524-1.89h.096v1.651h2.719v-8.037c.008-3.174-2.575-4.13-4.872-4.13zm2.057 7.853c0 1.34-1.076 2.472-2.782 2.472-1.18 0-2.026-.542-2.026-1.579 0-1.084.95-1.538 2.21-1.722.74-.103 2.224-.287 2.598-.59v1.42zM52.994 4.49h-2.83v3.006h-1.715v2.256h1.714v6.65c-.016 2.257 1.627 3.373 3.756 3.31a5.58 5.58 0 0 0 1.443-.216v-2.24c-.215.031-.718.095-1.077.103-.71.016-1.283-.247-1.283-1.395V9.752h2.36V7.502h-2.368V4.489z"></path></svg>

</a></h3>
<h2><code>jdsteinbach</code></h2>
<h3><a rel="noreferrer noopener nofollow" target="_blank" href="https://twitter.com/jdsteinbach">Twitter</a> | <a rel="noreferrer noopener nofollow" target="_blank" href="https://github.com/jdsteinbach">GitHub</a> | <a href="https://jdsteinbach.com">Blog</a></h3>

</section>

        
      </div>

      <footer class="colophon">
        <div class="colophon__logo">
          <img src="./images/emberconf-logo.svg" alt="Virtual EmberConf 2022">
        </div>

        <a href="https://jdsteinbach.com/resp-comps-emberconf-2022" class="colophon__link">jds.li/resp-comps-ec</a>
      </footer>
    </div>

    <script src="js/reveal.js"></script>

    <script>
      // More info about config & dependencies:
      // - https://github.com/hakimel/reveal.js#configuration
      // - https://github.com/hakimel/reveal.js#dependencies
      Reveal.initialize({
        height: 900,
        width: 1200,
        hash: true,
        transition: 'fade'
      });


      Reveal.on('slidechanged', e => {
        console.log({e})
        const [bgIframe] = document.querySelectorAll('.slide-background.present iframe')

        console.log({bgIframe})

        if (bgIframe) {
          bgIframe.tabIndex = -1
        }
      })
    </script>
  

</body></html>